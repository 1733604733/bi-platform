define(["template","dialog","data-sources/list/main-model","data-sources/list/main-template"],function(a,b,c,d){return Backbone.View.extend({events:{"click .j-add-data-sources":"addDataSources","click .j-delete-data-sources":"deleteDataSources","click .j-edit-data-sources":"editDataSources"},initialize:function(){var a=this;a.model=new c,this.listenTo(this.model,"change:dataSourcesList",function(b,c){a.$el.html(d.render({dataSourcesList:c}))}),this.model.loadDataSourcesList(),window.dataInsight.main=this},addDataSources:function(){window.dataInsight.main.destroy(),require(["data-sources/create-view"],function(a){new a({el:$(".j-main"),isAdd:!0})})},editDataSources:function(a){var b=this.getLineId(a);window.dataInsight.main.destroy(),require(["data-sources/create-view"],function(a){new a({el:$(".j-main"),id:b,isAdd:!1})})},deleteDataSources:function(a){var c=this,d=this.getLineId(a);b.confirm("是否确定删除当前数据源",function(){c.model.deleteDataSources(d)})},getLineId:function(a){return $(a.target).parents(".j-root-line").attr("data-id")},destroy:function(){this.model.clear({silent:!0}),this.stopListening(),$(this.el).unbind().empty()}})});