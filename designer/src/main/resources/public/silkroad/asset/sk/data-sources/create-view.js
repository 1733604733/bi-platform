define(["data-sources/create-template","data-sources/create-model"],function(a,b){var c=a.CLASS;return Backbone.View.extend({events:{"click .j-extend-line-link":"extendLine","click .j-add-address":"_addReserveAddress","click .j-delete-address":"_deleteInputInfo","click .j-button-submit":"_submit","click .j-button-cancel":"_cancel","focus .j-input-password":"_clearPassword","blur .j-input-password":"_revertPassword"},initialize:function(c){var d=this,e={};void 0!==c.id&&(e.id=c.id),d.model=new b(e),d.model.set({isAdd:c.isAdd,isEncrypt:!0}),d.listenTo(d.model,"change:dbData",function(b,c){var e=a.render(c);d.$el.html(e)}),this.model.getInitData(),window.dataInsight.main=this},extendLine:function(a){var b=$(a.target).find(".j-icon-arrow"),c=this.$el.find(".j-extend-line");c.hasClass("hide")?(c.removeClass("hide"),b.removeClass("icon-arrow-down").addClass("icon-arrow-up")):(c.addClass("hide"),b.removeClass("icon-arrow-up").addClass("icon-arrow-down"))},getFormData:function(){var a=this.$el.find("[name]"),b={},c=!0,d="25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]",e="(^((https?):\\/\\/)?("+d+")"+"\\."+"("+d+"|0)"+"\\."+"("+d+"|0)"+"\\."+"("+d+")"+"(:\\d{0,5})?$"+")|("+"^("+"((https?):\\/\\/)?"+"[a-z0-9]([a-z0-9\\-]*[\\.])+"+")"+"([a-z]{2}|aero|arpa|biz|com|coop|edu|gov|info|int|jobs|mil|museum|name|nato|net|org|pro|travel)$"+")",f={name:/.+/,hostAndPort:new RegExp(e),dbInstance:/.+/,dbUser:/.+/,dbPwd:/.+/,dbUser:/.+/};return a.each(function(){var a=$(this),d=a.next(),e=a.attr("name"),g=f[e];b[e]=a.val(),g&&g.constructor==RegExp&&(g.test(b[e])?d.addClass("hide"):(c=!1,d.removeClass("hide")))}),c?b:c},destroy:function(){this.model.clear({silent:!0}),this.stopListening(),this.$el.unbind().empty()},_clearPassword:function(){var a=this.model.get("isAdd");a||$("."+c.J_INPUT_PASSWORD).val("")},_revertPassword:function(){this.model;var a=this.model.get("isAdd"),b=this.$el;if(a)this.model.set({isEncrypt:!1});else{var b=$("."+c.J_INPUT_PASSWORD),d=$.trim(b.val());""==d?(b.val(this.model.get("dbData").dbPwd),this.model.set({isEncrypt:!0})):this.model.set({isEncrypt:!1})}},_addReserveAddress:function(){var a="."+c.J_DATA_SOURCES_PART+" ."+c.J_DATASOURCE_RESERVEADDRESS_MOUDLE;$("."+c.J_DATASOURCE_DATABASE_BOX).before($(a).clone(!0))},_deleteInputInfo:function(a){var b=$(a.target);b.parent().parent().remove()},_submit:function(){var a=this,b=a.getFormData();b&&this.model.submit(b,function(){a.destroy(),a._initDatasourceList()})},_cancel:function(){this.destroy(),this._initDatasourceList()},_initDatasourceList:function(){require(["data-sources/list/main-view"],function(a){new a({el:$(".j-main")})})}})});