define(["url","constant"],function(a,b){return Backbone.Model.extend({defaults:{dataformatOptions:b.DATA_FORMAT_OPTIONS},initialize:function(a){this.canvasModel=a.canvasModel,this.reportId=a.reportId},getCompAxis:function(b,c){var d=this;$.ajax({url:a.getCompAxis(d.reportId,b),success:function(a){c(a.data)}})},addCompAxis:function(b,c,d){var e=this;$.ajax({url:a.addCompAxis(e.reportId,b),data:c,type:"POST",success:function(a){d(a.data.id)}})},deleteCompAxis:function(b,c,d,e){$.ajax({url:a.deleteCompAxis(this.reportId,b,d,c),type:"DELETE",success:function(){e()}})},getCompDataById:function(a){for(var b=this.canvasModel.reportJson.entityDefs,c=[],d=0,e=b.length;e>d;d++)b[d].compId==a&&c.push(b[d]);return c},updateCalendarJson:function(a,b){var c=this.canvasModel.compBoxModel,d=c.getComponentData("TIME_COMP"),e=this.getCompDataById(this.compId)[0],f=d.switchConfig(a);e.dataSetOpt.timeTypeList=f.timeTypeList,e.dataSetOpt.timeTypeOpt=f.timeTypeOpt,this.canvasModel.saveJsonVm(b)},sortingCompDataItem:function(b,c,d){$.ajax({url:a.sortingCompDataItem(this.reportId,b),type:"POST",data:c,success:function(){d()}})},getDataFormatList:function(b,c){var d=this;$.ajax({url:a.getDataFormatList(this.reportId,b),type:"get",success:function(a){var b=a.data;b.dataformatOptions=d.get("dataformatOptions");for(var e=window.dataInsight.main.model.get("indList").data,f=0,g=e.length;g>f;f++)b.dataformat[e[f].name]&&(b.dataformat[e[f].name].name=e[f].caption);c(b)}})},saveDataFormatInfo:function(b,c,d){var e={areaId:b,dataFormat:JSON.stringify(c)};$.ajax({url:a.getDataFormatList(this.reportId,b),type:"POST",data:e,success:function(){d()}})}})});