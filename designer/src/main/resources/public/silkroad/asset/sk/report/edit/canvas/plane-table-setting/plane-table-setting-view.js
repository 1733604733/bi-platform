define(["dialog","report/edit/canvas/plane-table-setting/plane-table-setting-model","report/edit/canvas/plane-table-setting/field-filter-setting-template","report/edit/canvas/table-setting/text-align/text-align-view","report/edit/canvas/plane-table-setting/pagination/pagination-view","report/edit/canvas/plane-table-setting/other-setting/other-setting-view"],function(a,b,c,d,e,f){return Backbone.View.extend({events:{"click .j-line-s .item":"setFilter"},initialize:function(a){this.model=new b({canvasModel:a.canvasView.model,reportId:a.reportId}),this.model.set("compId",this.$el.find(".j-comp-setting").attr("data-comp-id")),this.canvasView=a.canvasView,this.textAlignView=new d({el:this.el,reportId:this.model.get("reportId"),canvasView:this.canvasView}),this.paginationView=new e({el:this.el,reportId:this.model.get("reportId"),canvasView:this.canvasView}),this.othersView=new f({el:this.el,reportId:this.model.get("reportId"),canvasView:this.canvasView})},setFilter:function(b){var d=this,e=$(b.target);if(e.hasClass("j-item-text")){var f=e.text(),g=e.parent().attr("data-id");this.model.getFieldFilterInfo(g,function(b){b.id=g,b.text=f;var e=c.render(b);a.showDialog({title:"设置条件信息",content:e,dialog:{width:580,height:200,resizable:!1,buttons:[{text:"提交",click:function(){d.saveFieldFilter($(this))}},{text:"取消",click:function(){$(this).dialog("close")}}]}})})}},saveFieldFilter:function(a){var b=$(".silkroad-data-field-filter-set"),c=b.find(".field-id").attr("data-id"),d=b.find(".field-name").val(),e=b.find(".condition").val(),f=b.find(".default-value").val(),g={name:d,sqlCondition:e,defaultValue:f};this.model.saveFieldFilterInfo(c,g,function(){a.dialog("close"),window.dataInsight.main.canvas.showReport()})},destroy:function(){this.stopListening(),this.model.clear({silent:!0}),delete this.model,this.$el.unbind()}})});