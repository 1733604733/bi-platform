define(["url"],function(a){return Backbone.Model.extend({events:{"change:currentCubeId":"loadIndList"},initialize:function(a){this.runtimeData={isEdit:a.isEdit},this.listenTo(this,"change:currentCubeId",this.loadIndList),this.listenTo(this,"change:currentCubeId",this.loadDimList)},getRuntimeId:function(b){var c=this;$.ajax({url:a.getRuntimeId(c.id),type:"POST",data:c.runtimeData,success:function(){b()}})},loadCubeList:function(){var b=this;b.getRuntimeId(function(){$.ajax({url:a.loadCubeList(b.id),success:function(a){b.set({cubeList:a.data}),a.data.length>0&&b.set({currentCubeId:a.data[0].id})}})})},loadIndList:function(){var b=this;$.ajax({url:a.loadIndList(b.id,b.get("currentCubeId")),success:function(a){map={SUM:"S",COUNT:"C",AVERAGE:"A",DISTINCT_COUNT:"D"},b.set({indList:{data:a.data,map:map}})}})},loadDimList:function(){var b=this;$.ajax({url:a.loadDimList(b.id,b.get("currentCubeId")),success:function(a){b.set({dimList:a.data.dimList})}})},getItemDataById:function(a,b){function c(a,b){var c=e.get(b+"List");"ind"==b&&(c=c.data);for(var d=0,f=c.length;f>d;d++)if(c[d].id==a)return c[d]}var d,e=this;if(void 0===b){var f=c(a,"ind");d=f?f:c(a,"dim")}else d=c(a,b);return d}})});